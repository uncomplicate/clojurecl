<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>uncomplicate.clojurecl.internal.utils documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clojurecl</span> <span class="project-version">0.16.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>uncomplicate</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clojurecl</span></div></div></li><li class="depth-3 branch"><a href="uncomplicate.clojurecl.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="uncomplicate.clojurecl.info.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>info</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>internal</span></div></div></li><li class="depth-4 branch"><a href="uncomplicate.clojurecl.internal.constants.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>constants</span></div></a></li><li class="depth-4 branch"><a href="uncomplicate.clojurecl.internal.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-4 current"><a href="uncomplicate.clojurecl.internal.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-3"><a href="uncomplicate.clojurecl.toolbox.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>toolbox</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="uncomplicate.clojurecl.internal.utils.html#var-error"><div class="inner"><span>error</span></div></a></li><li class="depth-1"><a href="uncomplicate.clojurecl.internal.utils.html#var-maybe"><div class="inner"><span>maybe</span></div></a></li><li class="depth-1"><a href="uncomplicate.clojurecl.internal.utils.html#var-with-check"><div class="inner"><span>with-check</span></div></a></li><li class="depth-1"><a href="uncomplicate.clojurecl.internal.utils.html#var-with-check-arr"><div class="inner"><span>with-check-arr</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">uncomplicate.clojurecl.internal.utils</h1><div class="doc"><pre class="plaintext">Utility functions used as helpers in other ClojureCL namespaces.
The user of the ClojureCL library would probably not need to use
any of the functions defined here.</pre></div><div class="public anchor" id="var-error"><h3>error</h3><div class="usage"><code>(error err-code details)</code><code>(error err-code)</code></div><div class="doc"><pre class="plaintext">Converts an OpenCL error code to an [ExceptionInfo]
(<a href="http://clojuredocs.org/clojure.core/ex-info)">http://clojuredocs.org/clojure.core/ex-info)</a>
with richer, user-friendly information.

Accepts a long `err-code` that should be one of the codes defined in
OpenCL standard, and an optional `details` argument that could be
anything that you think is informative.

See the available codes in the source of [[constants/dec-error]].
Also see the discussion about
[OpenCL error codes](<a href="http://streamcomputing.eu/blog/2013-04-28/opencl-1-2-error-codes/)">http://streamcomputing.eu/blog/2013-04-28/opencl-1-2-error-codes/)</a>.

Examples:

    (error 0) =&gt; an ExceptionInfo instance
    (error -5 {:comment "Why here?""}) =&gt; an ExceptionInfo instance
</pre></div></div><div class="public anchor" id="var-maybe"><h3>maybe</h3><h4 class="type">macro</h4><div class="usage"><code>(maybe form)</code></div><div class="doc"><pre class="plaintext">Evaluates form in try/catch block; if an OpenCL-related exception is caught,
substitutes the result with the [ExceptionInfo](<a href="http://clojuredocs.org/clojure.core/ex-info)">http://clojuredocs.org/clojure.core/ex-info)</a>
object.
Non-OpenCL exceptions are rethrown. Useful when we do not want to let a minor
OpenCL error due to a driver incompatibility with the standard
or an unimplemented feature in the actual driver crash the application.
An [ExceptionInfo](<a href="http://clojuredocs.org/clojure.core/ex-info)">http://clojuredocs.org/clojure.core/ex-info)</a> object will be
put in the place of the expected result.</pre></div></div><div class="public anchor" id="var-with-check"><h3>with-check</h3><h4 class="type">macro</h4><div class="usage"><code>(with-check status form)</code><code>(with-check status details form)</code></div><div class="doc"><pre class="plaintext">Evaluates `form` if `status` is not zero (`CL_SUCCESS`), otherwise throws
an appropriate `ExceptionInfo` with decoded informative details.
It helps fith JOCL methods that return error codes directly, while
returning computation results through side-effects in arguments.

Example:

    (with-check (some-jocl-call-that-returns-error-code) result)
</pre></div></div><div class="public anchor" id="var-with-check-arr"><h3>with-check-arr</h3><h4 class="type">macro</h4><div class="usage"><code>(with-check-arr status form)</code><code>(with-check-arr status details form)</code></div><div class="doc"><pre class="plaintext">Evaluates `form` if the integer in the `status` primitive int array is `0`,
Otherwise throws an exception corresponding to the error code.
Similar to [[with-check]], but with the error code being held in an array instead
of being a primitive number. It helps with JOCL methods that return results
directly, and signal errors through side-effects in a primitive array argument.

    (let [err (int-array 1)
          res (some-jocl-call err)]
       (with-checl-arr err res))
</pre></div></div></div></body></html>